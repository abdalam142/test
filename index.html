<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=1200" />
  <title>ุจุญุซ ูู ุงูููุชุฌุงุช</title>

  <!-- ููุชุจุงุช (CDNs) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://unpkg.com/html5-qrcode@2.3.8"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>

  <!-- ููู CSS ูููุตู -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>ุจุญุซ ูู ุงูููุชุฌุงุช</h2>

  <div id="status" title="ุฏุจู ูููู ูุฑูุน ููู Excel ูุญูู">ุฌุงุฑู ูุญุงููุฉ ุชุญููู ููู ุงูุฅูุณู...</div>

  <!-- messages area -->
  <div id="messagesPanel" aria-live="polite"></div>

  <!-- persistent notice -->
  <div id="persistentNotice"><div class="notice"><div id="persistentText">ูุฏูู ููุชุฌุงุช ูุญููุธุฉ ูุญูููุง โ ุณุชุธู ูุญููุธุฉ ุญุชู ุชุญุฐููุง.</div><div><button id="dismissPersistent" class="btn ghost">ุฅุฎูุงุก</button></div></div></div>

  <div id="app">
    <div class="searchRow" role="region" aria-label="ุดุฑูุท ุงูุจุญุซ">
      <input id="searchBar" type="text" placeholder="ุงูุชุจ ุงูุงุณู ุฃู ุงูุจุงุฑููุฏ ุฃู ูุตู ุงูููุชุฌ" aria-label="ุจุญุซ">
      <button id="searchBtn" class="btn primary">ุจุญุซ</button>
      <button id="clearBtn" class="btn ghost">ุญุฐู</button>
      <button id="cameraBtn" class="btn camera">๐ท QR</button>
      <button id="scaleBtn" class="btn ghost">๐ถ ููุฏ ุงูููุฒุงู</button>
      <button id="adminBtn" class="btn ghost" style="margin-left:8px">ูุถุน ุงูุฃุฏูู</button>
    </div>

    <div class="dup-warning" id="dupWarning" role="alert"></div>

    <div id="reader" aria-hidden="true"></div>

    <div class="tables">
      <div class="col" aria-label="ูุชุงุฆุฌ ุงูุจุญุซ">
        <h3>ูุชุงุฆุฌ ุงูุจุญุซ</h3>
        <div style="text-align:left; margin-bottom:6px;">
          <button id="clearResultsBtn" style="display:none;" class="btn ghost">ุญุฐู ุงููู</button>
        </div>
        <table id="results" aria-live="polite">
          <thead>
            <tr>
              <th>ุงุณู ุงูููุชุฌ</th>
              <th>ุณุนุฑ</th>
              <th>ููุฏ ุงูููุฒุงู</th>
              <th>QR</th>
              <th>ุฅุฌุฑุงุก</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="col" aria-label="ุงูููุชุฌุงุช ุงููุฎุชุงุฑุฉ">
        <h3>ุงูููุชุฌุงุช ุงููุฎุชุงุฑุฉ (<span id="selectedCount">0</span>)</h3>
        <div style="text-align:left; margin-bottom:6px;">
          <button id="clearAllBtn" class="btn ghost" style="display:none">ุญุฐู ุงููู (ุฃุฏูู)</button>
          <button id="showCancelledBtn" class="btn ghost" style="margin-left:8px;">ุฅุธูุงุฑ ุงูููุบู</button>
        </div>
        <table id="finalResults" aria-live="polite">
          <thead>
            <tr>
              <th>ุงุณู ุงูููุชุฌ</th>
              <th>ุงูุนุฏุฏ</th>
              <th>ููุฏ ุงูููุฒุงู</th>
              <th>Barcode</th>
              <th>ุงูุชุงุฑูุฎ</th>
              <th>ุงูุญุงูุฉ</th>
              <th>ุฅุฌุฑุงุก</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div style="margin-top:8px; text-align:left;">
          <button id="exportBtn" class="btn primary">ุชุตุฏูุฑ ุฅูุณู</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ููุฏุงู ุงูุชุฃููุฏ ุงูุนุงู (ุจุฏูู ููู alert/prompt/confirm) -->
  <div class="dialog-overlay" id="dialogModal">
    <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="dialogTitle">
      <h4 id="dialogTitle">ุนููุงู</h4>
      <div class="dialog-msg" id="dialogMsg"></div>
      <input id="dialogInput" class="dialog-input" style="display:none;" />
      <div class="dialog-actions" id="dialogActions">
        <button id="dialogCancel" class="btn ghost">ุฅูุบุงุก</button>
        <button id="dialogOk" class="btn primary">ููุงูู</button>
      </div>
    </div>
  </div>

  <!-- ููุฏุงู ุงูุงุณุชูุงู (ููุง ูุงู) -->
  <div class="modal-overlay" id="receiveModal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h4 id="modalTitle">ุงุณุชูุงู ุงูููุชุฌ</h4>
      <div id="modalName" style="text-align:center; font-weight:700; margin-bottom:8px"></div>
      <input id="modalInput" class="modal-input" inputmode="decimal" placeholder="ุงูุนุฏุฏ ุฃู ุงููุฒู (ูุซุงู: 2 ุฃู 0.5)" autocomplete="off" />
      <div class="numpad" aria-hidden="false">
        <button type="button" data-key="7">7</button>
        <button type="button" data-key="8">8</button>
        <button type="button" data-key="9">9</button>
        <button type="button" data-key="4">4</button>
        <button type="button" data-key="5">5</button>
        <button type="button" data-key="6">6</button>
        <button type="button" data-key="1">1</button>
        <button type="button" data-key="2">2</button>
        <button type="button" data-key="3">3</button>
        <button type="button" id="modalBack">โซ</button>
        <button type="button" data-key="0">0</button>
        <button type="button" data-key=".">.</button>
      </div>
      <div class="actions" style="display:flex; gap:8px; justify-content:center; margin-top:12px">
        <button class="btn ghost" id="modalCancel">ุฅูุบุงุก</button>
        <button class="btn primary" id="modalConfirm">ุชู</button>
      </div>
    </div>
  </div>

  <!-- ููู ุฑูุน ูุฎูู -->
  <input id="fileInput" type="file" accept=".xlsx,.xls" style="display:none" />

  <!-- ููู JS ูููุตู -->
  <script src="script.js"></script>
</body>
</html>
